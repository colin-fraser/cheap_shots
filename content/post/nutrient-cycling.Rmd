---
title: Nutrient Cycling?
author: Drew Tyre
date: '2017-12-07'
draft: true
slug: nutrient-cycling
categories:
  - Teaching
  - R
tags: []
---

I set up 4 10 gallon aquaria in the teaching lab this semester. The goal was to observe the nitrogen cycle as the tanks settled in. I also needed an excuse to try out the new Hach environmental water testing kit that we ordered. The data are on figshare.

```{r setup, message=FALSE}
library(tidyverse)
aq <- read_csv("https://ndownloader.figshare.com/files/9932452")
# fix missing column name
names(aq)[14] <- "Flag_NO3"
```

The students measured ammonium, nitrite, nitrate and phosphorous for the first 3 days. Then I took over and measured the first three for another 5 days. TIL: running these tests takes **time**. Ouch. Anyway, I finally entered all the data, and now I want to take a look. First I will gather it up so all the values are in one column. Makes faceting easier. 

```{r}
aq2 <- gather(aq, key = nutrient, value = conc, NH4, NO2, NO3, P)
```

That's not quite right because I also need the data quality flag variables to be copied in the right places. Hmmm. I got the general strategy from [StackOverflow](https://stackoverflow.com/questions/23945350/reshaping-wide-to-long-with-multiple-values-columns?noredirect=1&lq=1).

```{r}

```

